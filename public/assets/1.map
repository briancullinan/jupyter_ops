{"version":3,"file":"1.chunk.js","sources":["webpack:///./src/client/app/components/recording.module.ts","webpack:///./src/client/app/components/recording.component.ts","webpack:///./src/client/app/components/recording.component.html","webpack:///./src/client/app/components/recording.component.scss?d5ce","webpack:///./src/client/app/components/recording.component.scss"],"sourcesContent":["import { RouterModule, Routes } from '@angular/router';\nimport { ModuleWithProviders, NgModule } from '@angular/core';\nimport { COMMON_MODULES } from '../../../imports/core.module';\nimport { RecordingComponent } from './recording.component';\n\nexport const COMPONENTS = [\n    RecordingComponent\n];\n\nexport const recordingRoutes: Routes = [\n    {\n        path: '',\n        component: RecordingComponent,\n        data: {roles: [ 'anonymous', 'user' ]}\n    }\n];\nexport const routing: ModuleWithProviders = RouterModule.forChild(recordingRoutes);\n\n@NgModule({\n    imports: [\n        ...COMMON_MODULES,\n        routing\n    ],\n    declarations: COMPONENTS,\n    exports: COMPONENTS\n})\nexport class RecordingModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// node_modules/angular2-template-loader!./node_modules/tslint-loader!./src/client/app/components/recording.module.ts","import { ChangeDetectorRef, Component, ElementRef, HostListener, OnDestroy, OnInit } from '@angular/core';\nimport { SearchService } from '../../../imports/search.service';\nimport { Subscription } from 'rxjs/Subscription';\n\n@Component({\n    selector: 'bc-recording',\n    template: require('./recording.component.html'),\n    styles: [ require('./recording.component.scss') ]\n})\nexport class RecordingComponent {\n\n    recording = false;\n    events: Array<any> = [];\n\n    constructor(public ref: ChangeDetectorRef) {\n\n    }\n\n    @HostListener('document:click', [ '$event' ])\n    onClick(event: MouseEvent): void {\n        if (!this.recording) {\n            return;\n        }\n        console.log(event);\n        const path = this.elementToXPath((event as any).path);\n        this.events.push({\n            label: `browser.click('${path}')`\n        });\n        this.ref.detectChanges();\n    }\n\n    elementToXPath(path: Array<EventTarget>): string {\n\n        // algorithm magic!\n        // create an very specific XPath following these rules\n        const addSegment = (elem: EventTarget): string => {\n            // add:\n            // * element tag name,\n            const tag = (elem as any).tagName;\n            // * ids,\n            let id: string | boolean = false;\n            if (typeof (elem as any).getAttribute === 'function') {\n                id = (elem as any).getAttribute('id');\n            }\n            // * classes with nouns (extra credit dictionary or service integration?),\n            let className: string | boolean = false;\n            if (typeof (elem as any).getAttribute === 'function') {\n                className = ((elem as any).getAttribute('class') || '').split(/\\s/)[ 0 ];\n            }\n\n            return `${tag ? tag : ''}${id\n                    ? `[@id=\"${id}\"]` : ''}${className\n                    ? `[contains(@class, \"${className}\")]` : ''}`;\n\n            // * indexes when all siblings are homogeneous, i.e. <li> and <tr><td>\n        };\n        // use a stack to start for easy debugging\n        const pathStack = [];\n        // as we traverse parents of evt.target DOM element\n        for (const currentEl of path) {\n            pathStack.unshift(addSegment(currentEl));\n        }\n\n        // flatten the XPath stack using '/'\n        return pathStack.join('/');\n        // minimize XPath by splitting up every combination and checking only 1 element is matched for click\n        // replace match with an extra / to create // between unnecessary segments\n        // prioritize by button/input, ids, classes, attributes? (extra credit), index\n        // sort by smallest and return shortest path matching 1 DOM element\n    }\n\n    convertXPathToCss() {\n        // if matched xpath is simple enough, convert it to CSS\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// node_modules/angular2-template-loader!./node_modules/tslint-loader!./src/client/app/components/recording.component.ts","module.exports = \"<div class=\\\"record-wrapper\\\">\\n    <header>\\n        <a md-button (click)=\\\"recording=true\\\">⏺️</a>\\n        <a md-button (click)=\\\"recording=false\\\">⏸</a>\\n    </header>\\n\\n    <pre class=\\\"event-wrapper\\\">\\n        <span *ngFor=\\\"let e of events\\\">{{ e.label }}\\n        </span>\\n    </pre>\\n</div>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/recording.component.html\n// module id = 372\n// module chunks = 1","\n        var result = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/sass-loader/lib/loader.js!./recording.component.scss\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/recording.component.scss\n// module id = 373\n// module chunks = 1","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \":host .record-wrapper {\\n  display: flex;\\n  flex-direction: column;\\n  width: 30%;\\n  max-width: 400px; }\\n  :host .record-wrapper a {\\n    padding: 5px;\\n    font-size: 30px;\\n    line-height: 30px;\\n    z-index: 100;\\n    height: 40px;\\n    width: 40px; }\\n  :host .record-wrapper .event-wrapper {\\n    display: flex;\\n    flex-wrap: wrap; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/sass-loader/lib/loader.js!./src/client/app/components/recording.component.scss\n// module id = 374\n// module chunks = 1"],"mappings":";;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAUA;AAAA;AACA;AAAA;AAAA;AADA;AARA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;;;;;;;;;;AC1BA;AASA;AAKA;AAAA;AAHA;AACA;AAIA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAIA;AAGA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAGA;AAEA;AAEA;AAAA;AACA;AACA;AAGA;AAKA;AAEA;AAEA;AAEA;AAAA;AAxDA;AADA;;;;AAWA;AApBA;AALA;AACA;AACA;AACA;AACA;AAMA;AALA;AAAA;;;;;;;;;ACTA;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}